<view class="container">
  <!-- Date Range Selector -->
  <view class="date-selector">
    <view class="selector-title">ç»Ÿè®¡æ—¶é—´èŒƒå›´</view>
    <view class="date-range">
      <picker 
        mode="date" 
        value="{{startDate}}" 
        bindchange="onStartDateChange"
        class="date-picker"
      >
        <view class="date-display">
          <text class="date-label">å¼€å§‹æ—¥æœŸ</text>
          <text class="date-value">{{startDate}}</text>
        </view>
      </picker>
      
      <text class="date-separator">è‡³</text>
      
      <picker 
        mode="date" 
        value="{{endDate}}" 
        bindchange="onEndDateChange"
        class="date-picker"
      >
        <view class="date-display">
          <text class="date-label">ç»“æŸæ—¥æœŸ</text>
          <text class="date-value">{{endDate}}</text>
        </view>
      </picker>
    </view>
    
    <view class="quick-selectors">
      <button class="quick-btn" bindtap="selectLastWeek">æœ€è¿‘7å¤©</button>
      <button class="quick-btn" bindtap="selectLastMonth">æœ€è¿‘30å¤©</button>
      <button class="quick-btn" bindtap="selectThisMonth">æœ¬æœˆ</button>
    </view>
  </view>

  <!-- Overall Statistics -->
  <view class="stats-overview">
    <view class="stats-title">æ€»ä½“ç»Ÿè®¡</view>
    <view class="stats-grid">
      <view class="stat-card">
        <view class="stat-number">{{statistics.totalRecords}}</view>
        <view class="stat-label">æ€»è®°å½•æ•°</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{statistics.totalLandBlocks}}</view>
        <view class="stat-label">åœ°å—æ•°é‡</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{statistics.totalImages}}</view>
        <view class="stat-label">ä¸Šä¼ å›¾ç‰‡</view>
      </view>
      <view class="stat-card">
        <view class="stat-number">{{statistics.totalFertilizers}}</view>
        <view class="stat-label">è‚¥æ–™ç§ç±»</view>
      </view>
    </view>
  </view>

  <!-- Land Block Statistics -->
  <view class="stats-section">
    <view class="section-title">åœ°å—ç»Ÿè®¡</view>
    <view class="land-block-stats">
      <view 
        class="land-block-item" 
        wx:for="{{statistics.landBlockStats}}" 
        wx:key="id"
      >
        <view class="land-block-info">
          <text class="land-block-name">{{item.name}}</text>
          <text class="record-count">{{item.recordCount}} æ¡è®°å½•</text>
        </view>
        <view class="progress-bar">
          <view 
            class="progress-fill" 
            style="width: {{item.percentage}}%"
          ></view>
        </view>
      </view>
    </view>
  </view>

  <!-- Fertilizer Usage Statistics -->
  <view class="stats-section">
    <view class="section-title">è‚¥æ–™ä½¿ç”¨ç»Ÿè®¡</view>
    <view class="fertilizer-stats">
      <view 
        class="fertilizer-item" 
        wx:for="{{statistics.fertilizerStats}}" 
        wx:key="name"
      >
        <view class="fertilizer-info">
          <text class="fertilizer-name">{{item.name}}</text>
          <text class="fertilizer-usage">æ€»ç”¨é‡: {{item.totalAmount}} {{item.unit}}</text>
        </view>
        <view class="usage-chart">
          <view 
            class="usage-bar" 
            style="width: {{item.percentage}}%"
          ></view>
        </view>
      </view>
    </view>
  </view>

  <!-- Recent Activity -->
  <view class="stats-section">
    <view class="section-title">æœ€è¿‘æ´»åŠ¨</view>
    <view class="activity-timeline">
      <view 
        class="activity-item" 
        wx:for="{{statistics.recentActivity}}" 
        wx:key="id"
      >
        <view class="activity-date">{{item.date}}</view>
        <view class="activity-content">
          <view class="activity-title">{{item.title}}</view>
          <view class="activity-description">{{item.description}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- AI Analysis Insights -->
  <view class="stats-section">
    <view class="section-title">AIåˆ†ææ´å¯Ÿ</view>
    <view class="insights">
      <view class="insight-item" wx:for="{{statistics.insights}}" wx:key="index">
        <view class="insight-icon">ğŸ’¡</view>
        <view class="insight-text">{{item}}</view>
      </view>
    </view>
  </view>

  <!-- Export Options -->
  <view class="export-section">
    <view class="section-title">æ•°æ®å¯¼å‡º</view>
    <view class="export-buttons">
      <button class="export-btn" bindtap="exportData" data-type="csv">
        å¯¼å‡ºCSV
      </button>
      <button class="export-btn" bindtap="exportData" data-type="pdf">
        å¯¼å‡ºPDFæŠ¥å‘Š
      </button>
      <button class="export-btn" bindtap="shareReport">
        åˆ†äº«æŠ¥å‘Š
      </button>
    </view>
  </view>
</view>

<!-- Loading State -->
<view class="loading-overlay" wx:if="{{loading}}">
  <view class="loading-content">
    <text class="loading-text">æ­£åœ¨åŠ è½½ç»Ÿè®¡æ•°æ®...</text>
  </view>
</view>